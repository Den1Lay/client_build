(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{180:function(e){e.exports=JSON.parse('{"userData":{"nickname":"Es_ILias","password":"17171717","secret":"17"},"projectsCoordData":[{"0":{"path":"001010","height":"question"},"1":{"path":"01010101011111100123400110","height":15},"2":{"path":"0","height":0},"lastVersion":"1","projectsId":"uuid11"}],"lastProject":"uuid11","projects":[{"name":"string","description":"string","access":["Es_ILias"],"great_access":["Es_ILias"],"projectId":"uuid11","metaDataForm":{"healt":5,"enny":{"emotions":5,"instinc":5,"intellect":5}},"versies":{"0":{"dateCreation":"string","pos":"0","branch":{"0":{"newMetaData":{"healt":6,"enny":{"emotions":7,"instinc":4,"intellect":5}},"ans":"Why not? Go","pos":"00","branch":{"base":[{"coord":{"path":"00","height":"0"},"main":"","commets":"","picture":{"src":"null","alt":""}},{"coord":{"path":"00","height":"1"},"main":"","commets":"","picture":{"src":"null","alt":""}}]}},"1":{"pos":"01","branch":{"0":{"newMetaData":{"healt":0,"enny":{"emotions":0,"instinc":0,"intellect":0}},"ans":"Why not? Go","pos":"010","branch":{"base":[],"choseCount":0}},"1":{"newMetaData":{"healt":0,"enny":{"emotions":0,"instinc":0,"intellect":0}},"ans":"Why not? Go","pos":"011","branch":{"base":[],"choseCount":0}},"base":[{"coord":{"path":"01","height":"0"},"main":"","commets":"","picture":{"src":"null","alt":""}}],"question":{"ref":{"coord":{"path":"00","height":"1"}},"main":"Hey, will you go with us to camp?","commets":"Poka hz","picture":{"src":"main_street / null","alt":"A long narrow street with trees that create two impassable walls."}},"choseCount":2}},"branchDirection":"","base":[{"coord":{"path":"0","height":"0"},"main":"Yesterday i heard that Jeem get up some money. And i heard that there will auction, where uncle Bob will sell his track.","commets":"Wake up main theme","picture":{"src":"main_street / null","alt":"A long narrow street with trees that create two impassable walls."}},{"coord":{"path":"0","height":"1"},"main":"I saw that bit of shit. Bob will get 100 $ maximum","commets":"Wake up main theme","picture":{"src":"main_street / null","alt":"A long narrow street with trees that create two impassable walls."}}],"question":{"ref":false,"main":"Hey, will you go with us to camp?","commets":"Poka hz","picture":{"src":"main_street / null","alt":"A long narrow street with trees that create two impassable walls."}},"choseCount":2}}}}]}')},185:function(e,a,r){e.exports=r(344)},220:function(e,a,r){},222:function(e,a,r){},234:function(e,a,r){},243:function(e,a,r){},244:function(e,a,r){},254:function(e,a,r){},255:function(e,a,r){},258:function(e,a,r){},261:function(e,a,r){},266:function(e,a,r){},267:function(e,a,r){},282:function(e,a,r){},283:function(e,a,r){},284:function(e,a,r){},285:function(e,a,r){},286:function(e,a,r){},331:function(e,a){},334:function(e,a,r){},335:function(e,a,r){},336:function(e,a,r){},337:function(e,a,r){},338:function(e,a,r){},341:function(e,a,r){},342:function(e,a,r){},343:function(e,a,r){},344:function(e,a,r){"use strict";r.r(a);var t=r(0),n=r.n(t),o=r(15),c=r.n(o),s=r(14);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=r(46),l=r(160),u=r(47),d=r(4),p=r(73),m=r(348),h=r(357),v=r(121),f=r.n(v),E=r(361),b=function(e){var a=e.type,r=e.message,t=e.description;E.a[a]({message:r,description:t})};var k=function(e,a,r,t){for(var n in e){(function(a){r=Array.isArray(r)?r:[r];for(var t=e[a],n=r.slice();n.length;)t=t[n.shift()];return t})(n)===a&&(t[0]=n)}},_=r(66),w=r.n(_),j=r(90),g=(r(165),function(e){return e[0].toUpperCase()+e.substring(1)}),P=(Object(m.a)(new Date,"yyyy-MM-dd"),{projectsCoordsData:[],projects:!1,workPerson:null,workPCD:null,workBranch:null,mapStore:[],mapGrid:[],mapCurrent:"",availablePayload:null,users:[],personObj:null,friends:[],mainPlace:"editor"}),D=Object(m.a)(new Date,"yyyy-MM-dd"),O={nickname:"Es_ILias",avatar:"",lastProject:"none"},C=Object(i.c)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1?arguments[1]:void 0,r=a.type,t=a.payload,n=a.random;function o(){e.workBranch={},e.workPCD=null,e.workBranch.branch={},e.mainPlace="error",e.workBranch.v=n}function c(a){var r,t;"question"===e.workPCD[e.workPCD.workVersion].height?e.workBranch.branch.question?a():o():null!==(r=null===(t=e.workBranch.branch.base)||void 0===t?void 0:t[e.workPCD[e.workPCD.workVersion].height])&&void 0!==r&&r?a():o()}switch("CHANGE_BRANCH"!==r&&(e.mapStore=[],e.mapGrid=[],e.mapCurrent=[]),Array.isArray(window.reduxHistory)||(window.reduxHistory=[]),window.reduxHistory.push({type:r,payload:t}),r){case"ADD_PROJECT":return function(){var a=Object(h.a)(),r="v"+Object(h.a)(),o="p"+Object(h.a)(),c=t.name,s=t.description,i=t.access,l=t.superAccess;e.projects.unshift({name:c,description:s,superId:o,access:i,superAccess:l,versions:[{comment:"Init",date:D,superId:r,master:null,illustrations:[],ways:[{wayId:a,color:"green",wayDirection:""}],data:{pos:"0",wayId:a,branch:{branchDirection:"",base:[{coord:{path:"0",height:"0"},label:"",main:"",comment:"",picture:{src:null,alt:""}}],question:!1,choseCount:0}}}]});var u=e.projects[0].versions[0].superId;return e.workPCD=Object(p.a)({projectId:e.projects[0].superId,workVersion:u},u,{path:"0",height:"0"}),e.projectsCoordsData=[e.workPCD].concat(e.projectsCoordsData),e.workBranch=e.projects[0].versions[0].data,e.personObj.userData.myLastProject=e.projects[0].superId,e.mainPlace="editor",e.workBranch.v="n"+n,Object(d.a)({},e)}();case"SETUP_PROJECT":return function(){var a,r=t.name,o=t.description,c=t.access,s=t.superAccess;for(var i in e.projects)e.projects[i].superId===e.workPCD.projectId&&(a=i);function l(e,a,r){e.forEach((function(e){a.includes(e)||r.push(e)}))}var u=[],p=[],m=[],h=[];return l(e.projects[a].access,c,u),l(e.projects[a].superAccess,s,p),l(c,e.projects[a].access,m),l(s,e.projects[a].superAccess,h),e.projects[a]=Object(d.a)(Object(d.a)({},e.projects[a]),{},{name:r,description:o,access:c,superAccess:s}),e.workBranch.v="s"+n,e.mainPlace="editor",Object(d.a)(Object(d.a)({},e),{},{kicked:u,superKicked:p,newObservers:m,newEditord:h})}();case"LOGOUT":return delete localStorage.token,{projectsCoordsData:[],projects:!1,workPerson:null,workPCD:null,workBranch:null,mapStore:[],mapGrid:[],mapCurrent:"",availablePayload:null,users:[],personObj:null,friends:[],mainPlace:"editor"};case"OPEN_PLACE":return Object(d.a)(Object(d.a)({},e),{},{mainPlace:t});case"CLEAN_APPLICANT_LIST":return e.personObj.userData.applicantList=e.personObj.userData.applicantList.filter((function(e){return e.superId!==t})),console.log(e.personObj.userData.applicantList),e;case"UPDATE_APPLICANT_LIST":return e.personObj.userData.applicantList.push(t),Object(d.a)({},e);case"UPDATE_DATA":return function(){var a=t.data,r=t.address,i=(t.dls,e.workPerson===a.person);switch(r){case"friend":!function(){var r=a.userData,t=a.projects,o=[];k(e.friends,r.superId,["userData","superId"],o),e.friends[o[0]].projects=t,e.friendV=n}();break;case"projects":break;case"new_version":i&&function(){var r=a.projectId,t=a.workVersion,o=[];k(e.projects,r,"superId",o),e.projects[o[0]].versions.push(t),e.workBranch.v=n}();break;case"versions":i&&function(){a.person;var r=a.projectId,t=a.versionId,i=a.workVersion,l=[];k(e.projects,r,"superId",l);var u=[];k(e.projects[l[0]].versions,t,"superId",u),e.projects[l[0]].versions[u[0]].data=i;var d=[];k(e.projects,e.workPCD.projectId,"superId",d);var p=[];k(e.projects[d[0]].versions,e.workPCD.workVersion,"superId",p),e.workBranch=e.projects[d[0]].versions[p[0]].data;var m=e.workPCD[e.workPCD.workVersion].path.substring(1);e.workBranch.v=n,s(m,e);var h=[];k(e.projectsCoordsData,e.workPCD.projectId,"proojectId",h),"None"!==e.workBranch?(localStorage.updateWithDeleteWorkDirFlag="false",c((function(){localStorage.updateWithDeleteWorkDirFlag="true"})),"true"!==localStorage.updateWithDeleteWorkDirFlag&&(e.projectsCoordsData.splice(h[0],1),e.lastProject=null,e.workBranch.v="c"+n)):(o(),e.projectsCoordsData.splice(h[0],1),e.lastProject=null,e.workBranch.v="c"+n)}();break;case"available":i&&function(){var r=a.workPCD,t=a.pass,n=[];k(e.projects,r.projectId,"superId",n);var o=[];k(e.projects[n[0]].versions,r.workVersion,"superId",o),e.projects[n[0]].versions[o[0]].master!==e.personObj.userData.nickName&&(e.projects[n[0]].versions[o[0]].master=t)}();break;case"illustrations":i&&function(){var r=a.newIllust,t=a.action,n=a.workPCD,o=[];k(e.projects,n.projectId,"superId",o);var c=[];switch(k(e.projects[o[0]].versions,n.workVersion,"superId",c),t){case"ADD":e.projects[o[0]].versions[c[0]].illustrations.push(r);break;case"REMOVE":e.projects[o[0]].versions[c[0]].illustrations=e.projects[o[0]].versions[c[0]].illustrations.filter((function(e){return e.src!==r.src}))}console.log("%c%s","color: pink; font-size: 24px;","UPDATED_ILLUS:",e.projects[o[0]].versions[c[0]].illustrations)}();break;case"delete":i&&function(){var r=a.workPCD,t=a.target,o=[];k(e.projects,r.projectId,"superId",o);var c=[];if(k(e.projectsCoordsData,r.projectId,"projectId",c),"project"===t)e.projects.splice(o[0],1),e.projectsCoordsData.splice(c[0],1);else{var s=[];k(e.projects[o[0]].versions,r.workVersion,"superId",s),e.projects[o[0]].versions.splice(s[0],1),e.projectsCoordsData.splice(c[0],1)}e.workPCD.projectId===r.projectId&&(e.workBranch={},e.workBranch.branch={},e.workPCD=null,e.mainPlace="error"),e.workBranch.v=n}()}return e}();case"ACCESS_CONTROL":return function(){var a=t.event,r=t.pass,c=r.projectId,s=r.superId,i=r.all;if(e.personObj.userData.superId===s)return e;var l=[];k(e.friends,s,["userData","superId"],l);var u=[];k(e.friends[l[0]].projects,c,"superId",u);var d=e.personObj.userData.superId,p=e.friends[l[0]].projects[u[0]].access.slice(),m=e.friends[l[0]].projects[u[0]].superAccess.slice();switch(a){case"NEW":p.includes(d)||p.includes("all")||b({type:"success",message:"New access",description:"From ".concat(t.pass.nickName)}),e.friends[l[0]].projects[u[0]].access.push(i?"all":d);break;case"NEW_SUPER":m.includes(d)||m.includes("all")||b({type:"success",message:"New super access",description:"From ".concat(t.pass.nickName)}),e.friends[l[0]].projects[u[0]].superAccess.push(i?"all":d);break;case"KICK":e.friends[l[0]].projects[u[0]].access=i?p.filter((function(e){return"all"!==e})):p.filter((function(e){return e!==d}));var h=e.friends[l[0]].projects[u[0]].access;if(h.includes(d)||h.includes("all")||b({type:"warning",message:"Lose access",description:"From ".concat(t.pass.nickName)}),e.workPerson===s&&e.workPCD.projectId===c){var v=[];k(e.projectsCoordsData,c,"projectId",v),e.projectsCoordsData.splice(v[0],1),o(),e.workBranch.v="c"+n}break;case"SUPER_KICK":e.friends[l[0]].projects[u[0]].superAccess=i?m.filter((function(e){return"all"!==e})):m.filter((function(e){return e!==d}));var f=e.friends[l[0]].projects[u[0]].access;f.includes(d)||f.includes("all")||b({type:"warning",message:"Lose super access",description:"From ".concat(t.pass.nickName)}),e.workPerson}return e.accessV=n,e}();case"NEW_FRIEND_PROJECT":return function(){var a=t.personId,r=t.project,o=[];return k(e.friends,a,["userData","superId"],o),e.friends[o[0]].projects.push(r),e.friendV=n,e.workBranch.v=n,e}();case"CHANGE_MASTER":return e.workPCD?function(){var a=[];k(e.projects,e.workPCD.projectId,"superId",a);var r=[];if(k(e.projects[a[0]].versions,e.workPCD.workVersion,"superId",r),t){var o=e.personObj.userData.nickName;e.projects[a[0]].versions[r[0]].master=o,e.availablePayload=o,e.workBranch.v="a"+n}else e.projects[a[0]].versions[r[0]].master===e.personObj.userData.nickName&&(e.projects[a[0]].versions[r[0]].master=null,e.availablePayload=null,e.workBranch.v="a"+n);return e}():e;case"SET_ILLUSTRATIONS":return function(){var a=t.newIllustration,r=t.action,o=[];k(e.projects,e.workPCD.projectId,"superId",o);var c=[];switch(k(e.projects[o[0]].versions,e.workPCD.workVersion,"superId",c),r){case"ADD":e.projects[o[0]].versions[c[0]].illustrations.push(a);break;case"REMOVE":e.projects[o[0]].versions[c[0]].illustrations=e.projects[o[0]].versions[c[0]].illustrations.filter((function(e){return e.src!==a.src}))}return e.workBranch.v="i"+n,e}();case"SET_MAP_DATA":return function(){var a=t.mapGrid,r=t.mapStore,n=t.mapCurrent;return Object(d.a)(Object(d.a)({},e),{},{mapGrid:a,mapStore:r,mapCurrent:n})}();case"ADD_VERSION":return function(){var a=[];k(e.projects,e.workPCD.projectId,"superId",a);var r=[];k(e.projects[a[0]].versions,e.workPCD.workVersion,"superId",r);var o=e.projects[a[0]].versions[r[0]].data,c=new(f.a.factory(o))(o),i=e.projects[a[0]].versions[r[0]].illustrations,l="v"+Object(h.a)();e.projects[a[0]].versions.push({comment:t.comment,date:D,superId:l,master:null,illustrations:i,data:c});var u=[];k(e.projectsCoordsData,e.workPCD.projectId,"projectId",u);var d=f.a.factory(e.workPCD[e.workPCD.workVersion]);return e.projectsCoordsData[u[0]][l]=new d(e.workPCD[e.workPCD.workVersion]),e.projectsCoordsData[u[0]].workVersion=l,e.workPCD=e.projectsCoordsData[u[0]],e.workBranch=e.projects[a[0]].versions[e.projects[a[0]].versions.length-1].data,s(e.workPCD[e.workPCD.workVersion].path.substring(1),e),e.workBranch.v="v"+n,e.mainPlace="editor",e}();case"NEW_FRIEND_VERSION":return e;case"SAVE_POD":return function(){var a=t.data,r=a.label,o=a.mainPart,c=a.comment,s=a.artsDesription,i=a.branchDirection,l=(a.wayDirection,a.answers),p=a.artSrc,m=t.selectedType,h=e.workBranch.branch,v=e.workPCD[e.workPCD.workVersion].height,f=function(){l.forEach((function(a){var r=a.content,t=a.key,n=a.ref;console.log(typeof t);var o=!h.hasOwnProperty("q"+t);h["q"+t]=o?{ans:r,pos:e.workBranch.pos+t,branch:{branchDirection:"",base:[{coord:{path:e.workBranch.pos+t,height:"0"},label:"",main:"",comment:"",picture:{src:null,alt:""}}],question:!1,choseCount:0,ref:0!==n.length&&n}}:Object(d.a)(Object(d.a)({},h["q"+t]),{},{ans:r})})),h.choseCount=l.length,h.question={coord:{path:e.workBranch.pos,height:"question"},label:r,main:o,comment:c,picture:{src:p,alt:s}}};if("0"===m&&"question"!==v)h.base[v]={coord:{path:e.workBranch.pos,height:v},label:r,main:o,comment:c,picture:{src:p,alt:s}};else if("1"===m&&"question"===v)f();else if("1"===m&&"question"!==v){if(f(),v<h.base.length-1){var E=h.base.splice(v+1);h.q0.branch.base=E.map((function(e,a){return Object(d.a)(Object(d.a)({},e),{},{coord:{path:e.coord.path+"0",height:a}})}))}h.base.splice(v,1),e.workPCD[e.workPCD.workVersion].height="question"}else if("0"===m&&"question"===v){var b=e.workBranch.branch;b.base=[].concat(Object(u.a)(b.base),[{coord:{path:e.workBranch.pos,height:b.base.length},label:r,main:o,comment:c,picture:{src:p,alt:s}}]),e.workPCD[e.workPCD.workVersion].height=b.base.length-1;for(var k=0;k<b.choseCount;k++)delete b["q"+k];b.choseCount=0,b.question=!1}return e.workBranch.branch.branchDirection=i,e.workBranch.v="p"+n,Object(d.a)({},e)}();case"CHANGE_BRANCH":return function(){var a=[];k(e.projects,e.workPCD.projectId,"superId",a);var r=[];if(k(e.projects[a[0]].versions,e.workPCD.workVersion,"superId",r),"back"===t){var o=e.workPCD[e.workPCD.workVersion].path;e.workPCD[e.workPCD.workVersion].path=o.substring(0,o.length-1),e.workPCD[e.workPCD.workVersion].height="question",e.workBranch=e.projects[a[0]].versions[r[0]].data,s(e.workPCD[e.workPCD.workVersion].path.substring(1),e),e.workBranch.branch.base.length&&(e.workPCD[e.workPCD.workVersion].height="0")}else if("string"===typeof t){e.workBranch=e.projects[a[0]].versions[r[0]].data,e.workPCD[e.workPCD.workVersion].path=t,e.workPCD[e.workPCD.workVersion].height="question",s(t.substring(1),e),e.workBranch.branch.base.length&&(e.workPCD[e.workPCD.workVersion].height="0")}else e.workBranch=e.workBranch.branch["q"+t],e.workPCD[e.workPCD.workVersion].path=e.workPCD[e.workPCD.workVersion].path+t,e.workPCD[e.workPCD.workVersion].height="question",e.workBranch.branch.base.length&&(e.workPCD[e.workPCD.workVersion].height="0");return e.workBranch.v="c"+n,Object(d.a)({},e)}();case"ADD_POD":return function(){console.log(t);var a=e.workBranch.branch;if("question"!==t){var r=a.base.slice(0,+t+1),o=a.base.slice(+t+1);a.base=[].concat(Object(u.a)(r),[{coord:{path:e.workBranch.pos,height:+t+1},label:"",main:"",comment:"",picture:{src:null,alt:""}}]).concat(o.map((function(e){var a=e.coord,r=a.path,t=a.height;return Object(d.a)(Object(d.a)({},e),{},{coord:{path:r,height:+t+1}})}))),e.workPCD[e.workPCD.workVersion].height=+t+1}else a.base=[].concat(Object(u.a)(a.base),[{coord:{path:e.workBranch.pos,height:a.base.length},label:"",main:"",comment:"",picture:{src:null,alt:""}}]),e.workPCD[e.workPCD.workVersion].height=a.base.length-1;return e.workBranch.v="p"+n,Object(d.a)({},e)}();case"CHOOSE_POD":return e.workPCD[e.workPCD.workVersion].height=t,e.mainPlace="editor",e.workBranch.v="c"+n,Object(d.a)({},e);case"DELETE_POD":return function(){console.log(t);var a,r=e.workBranch.branch;if("question"===t){for(var o=0;o<r.choseCount;o++)delete r["q"+o];r.choseCount=0,r.question=!1,a=r.base.length-1}else r.base.splice(t,1),r.base=r.base.map((function(e,a){return Object(d.a)(Object(d.a)({},e),{},{coord:Object(d.a)(Object(d.a)({},e.coord),{},{height:a})})})),a=r.base.length-1>=t?t:t-1;return e.workPCD[e.workPCD.workVersion].height=a,e.workBranch.v="p"+n,Object(d.a)({},e)}();case"SELECT_PROJECT":return function(){var a=e.personObj.userData.friends.some((function(a){return a.superId===e.workPerson}));if(e.personObj.userData.superId!==e.workPerson){if(a){var r;for(var o in e.personObj.userData.friends)e.personObj.userData.friends[o].superId===e.workPerson&&(r=o);e.personObj.userData.friends[r].lastProject=t}}else e.personObj.userData.myLastProject=t;var i=[];k(e.projectsCoordsData,t,"projectId",i);var l=[];function u(){var a=e.projects[l[0]].versions[0].superId,r=e.projects[l[0]].versions[0].data.branch.base.length?"0":"question";e.projectsCoordsData.push(Object(p.a)({projectId:t,workVersion:a},a,{path:"0",height:r})),i=[e.projectsCoordsData.length-1]}k(e.projects,t,"superId",l),i.length||u(),e.workPCD=e.projectsCoordsData[i[0]];var m=[];if(k(e.projects[l[0]].versions,e.workPCD.workVersion,"superId",m),!m.length){var h=[];k(e.projectsCoordsData,t,"projectId",h),e.projectsCoordsData.splice(h[0],1),u(),m=["0"],e.workPCD=e.projectsCoordsData[i[0]]}return e.workBranch=e.projects[l[0]].versions[m[0]].data,s(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?(localStorage.chooseProjectFlag="false",c((function(){localStorage.chooseProjectFlag="true"})),"true"!==localStorage.chooseProjectFlag&&(e.projectsCoordsData.splice(i[0],1),u(),e.workPCD=e.projectsCoordsData[i[0]])):(e.projectsCoordsData.splice(i[0],1),u(),e.workPCD=e.projectsCoordsData[i[0]]),e.workBranch=e.projects[l[0]].versions[m[0]].data,e.workBranch.v="c"+n,e.mainPlace="editor",Object(d.a)({},e)}();case"SELECT_VERSION":return function(){var a=[];k(e.projects,e.workPCD.projectId,"superId",a);var r=[];if(k(e.projects[a[0]].versions,t,"superId",r),!e.workPCD.hasOwnProperty(t)){var o=e.projects[a[0]].versions[r[0]].data.branch.base.length?"0":"question";e.workPCD[t]={path:"0",height:o}}return e.workPCD.workVersion=t,e.workBranch=e.projects[a[0]].versions[r[0]].data,e.workBranch.v="c"+n,e}();case"ADD_FRIEND":return function(){var a=t.userData;return e.personObj.userData.friends.push({superId:a.superId,lastProject:null}),e.friends.push(t),e}();case"CHOOSE_ME":return function(){if(e.workBranch={},e.projects=t,e.workPerson=e.personObj.userData.superId,null!==e.personObj.userData.myLastProject){var a=e.personObj.userData.myLastProject,r=[];if(k(e.projectsCoordsData,a,"projectId",r),r.length){e.workPCD=e.projectsCoordsData[r[0]];var i=[];if(k(e.projects,e.workPCD.projectId,"superId",i),i.length){var l=[];if(k(e.projects[i[0]].versions,e.workPCD.workVersion,"superId",l),l.length)e.workBranch=e.projects[i[0]].versions[l[0]].data,s(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?c((function(){return e.mainPlace="editor"})):o();else o()}else o()}else o()}else e.workPCD=null,e.workBranch.branch={},e.mainPlace="beginner";return e.workBranch.v="c"+n,e}();case"CHOOSE_PERSON":return function(){var a=[];k(e.friends,t,["userData","superId"],a),e.projects=e.friends[a[0]].projects;var r=[];k(e.personObj.userData.friends,t,"superId",r);var i=e.personObj.userData.friends[r[0]].lastProject;if(null!==i){var l=[];if(k(e.projectsCoordsData,i,"projectId",l),l.length){e.workPCD=e.projectsCoordsData[l[0]];var u=[];if(k(e.projects,e.workPCD.projectId,"superId",u),u.length){console.time();var p=[];if(k(e.projects[u[0]].versions,e.workPCD.workVersion,"superId",p),p.length)console.timeEnd(),e.workBranch=e.projects[u[0]].versions[p[0]].data,s(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?c((function(){return e.mainPlace="editor"})):o();else o()}else o()}else o()}else e.workPCD=null,e.workBranch.branch={},e.mainPlace="choose";return e.workPerson=t,e.workBranch.v="c"+n,Object(d.a)({},e)}();case"INIT":return function(){var a=t.friends,r=t.personObj,n=r.projects,i=r.projectsCoordsData,l=r.lastProject,u=r.lastPerson,p=r.userData.superId;e.personObj=t.personObj,e.projectsCoordsData=e.personObj.projectsCoordsData,e.friends=a,e.workBranch={};var m=[];if(k(i,l,"projectId",m),u===p)if(e.workPerson=p,e.projects=e.personObj.projects,m.length){e.workPCD=e.projectsCoordsData[m[0]];var h=[];if(k(n,l,"superId",h),h.length){var v=[];if(k(e.projects[h[0]].versions,e.workPCD.workVersion,"superId",v),v.length)e.workBranch=e.projects[h[0]].versions[v[0]].data,s(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?c((function(){return e.mainPlace="editor"})):o();else o()}else o()}else o();else{e.workPerson=u;var f=[];if(k(a,u,["userData","superId"],f),e.projects=e.friends[f[0]].projects,m.length)if(e.workPCD=e.projectsCoordsData[m[0]],null!==l){var E=[];if(k(e.projects,l,"superId",E),E.length){var b=[];if(k(e.projects[E[0]].versions,e.workPCD.workVersion,"superId",b),b.length)e.workBranch=e.projects[E[0]].versions[b].data,s(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?c((function(){return e.mainPlace="editor"})):o();else o()}else o()}else e.workPCD=null,e.workBranch.branch={},e.mainPlace="choose";else o()}return e.workBranch.v=Math.random(),Object(d.a)({},e)}();default:return e}function s(e,a){for(;e.length;){var r,t,n,o,c;a.workBranch=null!==(r=null===(t=a.workBranch)||void 0===t||null===(n=t.branch)||void 0===n?void 0:n["q"+(null!==(o=null===(c=e)||void 0===c?void 0:c[0])&&void 0!==o?o:"none")])&&void 0!==r?r:"None",e=e.substring(1)}}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1?arguments[1]:void 0,r=a.type;a.payload;switch(r){case"SET_USER":default:return Object(d.a)({},e)}}}),N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,I=Object(i.e)(C,N(Object(i.a)(l.a,(function(e){return function(a){return function(r){console.log("STORE:",e),console.log("ACTION:",r),console.log("NEXT:",a),r.random=Math.random(),a(r)}}})))),y=(r(220),function(){return n.a.createElement("div",{className:"notes"},n.a.createElement("div",{className:"notes__plug"},"Plan & Scenario (SOON)"))}),S=r(10),A=r(1),T=r.n(A),B=(r(221),r(354)),R=(r(222),function(e){var a=e.width,r=void 0===a?100:a,t=e.place,o=void 0===t?"main":t,c=e.placeholder,s=e.changeHandler,i=void 0===s?function(){}:s,l=e.value,u=e.readOnly,d=e.isPassword,p=void 0!==d&&d,m={value:l,readOnly:u,style:{width:r+"%"},onChange:function(e){return i(e)},placeholder:c,className:T()("input","input__"+o)};return p?n.a.createElement(B.a.Password,m):n.a.createElement(B.a,m)}),V=r(351),H=r(358),L=r(359),U=(r(234),function(e){var a=e.actived,r=e.label,t=e.readOnly,o=e.height,c=e.onPlus,s=e.onDelete,i=e.onChoose,l=e.showDelete,u=e.onAction;return n.a.createElement("div",{className:T()("pod",a?"pod-actived":"pod-just"),onClick:function(){return i(o)}},n.a.createElement("div",{className:"pod__top"},n.a.createElement("div",{className:"pod__top_height"},o),!t&&n.a.createElement("div",{className:"pod__top_btns"},n.a.createElement("div",{className:T()("pod__top_btns_delete",l?"pod__top_btns_delete-show":"pod__top_btns_delete-hide"),onClick:function(e){e.stopPropagation(),function(e){e.stopPropagation(),l&&s(o)}(e),u()}},n.a.createElement(H.a,null)),n.a.createElement("div",{className:"pod__top_btns_plus",onClick:function(e){e.stopPropagation(),c(o),u()}},n.a.createElement(L.a,null)))),n.a.createElement("div",{className:T()("pod__bottom",a?"pod__bottom-actived":"pod__bottom-just")},n.a.createElement(V.a,{value:r.slice(0,45),readOnly:!0,rows:2})))}),W=r(33),q=(r(243),function(e){var a=e.children,r=e.place,t=void 0===r?"main":r,o=e.clickHandler,c=e.isCircle,s=e.disabled,i=void 0!==s&&s,l=e.htmlType,u=void 0===l?"button":l;return n.a.createElement(W.a,{disabled:i,shape:c?"circle":null,onClick:o,type:"primary",htmlType:u,className:T()("button","button__"+t)},a)}),F=r(353),M=(r(244),r(254),function(e){var a=e.row,r=e.placeholder,t=void 0===r?"":r,o=e.changeHandler,c=e.value,s=e.readOnly,i=void 0!==s&&s,l=e.disabled;return n.a.createElement(V.a,{disabled:l,readOnly:i,value:c,onChange:function(e){o(e),console.log("WTF")},rows:a,placeholder:t,className:"realMentions"})}),K=r(356),G=(r(255),r(349)),x=(r(258),G.a.TabPane),J=function(e){var a=e.value,r=e.setAnswers,t=e.setActiveKey,o=e.readOnly,c={addProps:function(e){return e.map((function(a,r){return a.closable=2!==e.length,a.key=r+"",a}))},remove:function(e){var t,n,o,c=a.panes;a.activeKey;for(var s in c)e===c[s].key&&(o=s);t=c[o-("0"===e?0:1)].key;var i=Object(u.a)(c).slice(0,+o),l=Object(u.a)(c).slice(+o+1);n=i.concat(l),n=this.addProps(n),r({activeKey:t,panes:n})},add:function(){var e=a.panes,t=Object(u.a)(e).concat({content:"",ref:"",wayId:Object(h.a)(),wayColor:"pink"});t=this.addProps(t),r({panes:t,activeKey:t.length-1+""})}};function s(e){var t=a.panes;t[a.activeKey].content=e,r(Object(d.a)(Object(d.a)({},a),{},{panes:t}))}function i(e){e.persist();var t=e.target.value,n=a.panes;n[a.activeKey].ref=t,r(Object(d.a)(Object(d.a)({},a),{},{panes:n}))}var l=a.panes,p=a.activeKey;return n.a.createElement(G.a,{type:o?"card":"editable-card",onChange:function(e){t({activeKey:e})},activeKey:p,onEdit:function(e,a){c[a](e)},className:""},l.map((function(e,a){return n.a.createElement(x,{tab:e.key,key:e.key,closable:p===a+""&&e.closable},n.a.createElement("div",{style:{margin:"1px"}},n.a.createElement(M,{readOnly:o,row:3,placeholder:"Answer..",value:e.content,changeHandler:s}),n.a.createElement("div",{className:"refToPod"},n.a.createElement(R,{readOnly:o,value:e.ref,placeholder:"Ref",changeHandler:i}))))})))},z=r(352),Q=(r(261),z.a.Option),X=Object(s.b)((function(e){var a=e.main,r=a.projects,t=a.friends,n=a.workPCD,o=a.personObj.userData;return{projects:r,friends:t,workPCD:n,nickName:o.nickName,superId:o.superId}}),{})((function(e){var a,r=e.changeHandler,t=e.isCreate,o=e.isSuper,c=e.projects,s=e.friends,i=e.workPCD,l=e.superId,u=e.nickName,d=e.disabled,p=[{value:"all",disabled:!1}].concat([{value:u,disabled:!0}]).concat(s.map((function(e){var a=e.userData,r=a.superId;return{value:a.nickName,superId:r,disabled:!1}})));if(t)a=[u];else{var m;for(var h in c)c[h].superId===i.projectId&&(m=h);a=v(o?c[m].superAccess:c[m].access)}function v(e){var a=[];return e.includes("all")&&a.push("all"),e.forEach((function(e){[{userData:{superId:l,nickName:u}}].concat(s).forEach((function(r){var t=r.userData,n=t.superId,o=t.nickName;e===n&&a.push(o)}))})),a}return n.a.createElement(z.a,{disabled:d,mode:"multiple",style:{width:"100%"},placeholder:"Please select",defaultValue:a,onChange:r,optionLabelProp:"label"},p.map((function(e){var a=e.value,r=e.disabled,t=e.superId;return n.a.createElement(Q,{key:t,value:a,label:a,disabled:r},n.a.createElement("div",null,a))})))})),Y=(r(266),function(e){var a=e.nickName,r=e.src,t=e.projectCount,o=e.onAdd,c=e.superId;return n.a.createElement("div",{className:"addTC"},r?n.a.createElement("div",{className:"addTC__avatar"},n.a.createElement("img",{src:r,alt:""})):n.a.createElement("div",{className:"addTC__avatar_plug"},a.substring(0,2)),n.a.createElement("div",{className:"addTC__data"},n.a.createElement("div",{className:"addTC__data_nickName"},a),n.a.createElement("div",{className:"addTC__data_projectCount"},"Projects: ".concat(t))),n.a.createElement("div",null,n.a.createElement(q,{clickHandler:function(){return o(c)}},"Accept")))}),$=r(362),Z=r(350),ee=r(360),ae=r(363),re=(r(267),z.a.Option),te=($.a.CheckableTag,Z.a.Dragger,function(e){var a=e.value,r=e.row,o=e.mentionsHandler,c=e.fileHandler,s=e.artSrc,i=e.illustrations,l=e.unsetIllust,u=e.setIllust,d=e.removeIllust,p=e.readOnly,m=Object(t.useState)("description"),h=Object(S.a)(m,2),v=h[0],f=h[1],E=Object(t.useState)(!1),b=Object(S.a)(E,2),k=(b[0],b[1],{firstVal:"Description",firstHandler:function(){return f("description")},secondVal:"Picture",secondHandler:function(){return f("picture")},checkData:"description"===v});return n.a.createElement("div",{className:"artPart"},n.a.createElement("div",{className:"artPart__main"},n.a.createElement("div",{className:T()("artPart__main_description","artPart__main_description"+("picture"===v?"-hide":"-show"))},n.a.createElement(M,{readOnly:p,value:a,row:r,placeholder:"Arts description",changeHandler:o})),n.a.createElement("div",{className:T()("artPart__main_picture","artPart__main_picture"+("picture"===v?"-show":"-hide"))},"string"===typeof s?n.a.createElement("div",{className:"pictureWrapper"},n.a.createElement("div",{className:"pictureWrapper__shadow"},n.a.createElement("div",{className:"buttonWrapper"},n.a.createElement("span",{className:"pictureWrapper__shadow_unset",onClick:function(e){return!p&&l(e)}},"x"),n.a.createElement("div",{className:"pictureWrapper__shadow_remove"},n.a.createElement(ee.a,{placement:"rightBottom",title:"Remove this picture",onConfirm:function(){return!p&&d(s)},okText:"Yes",cancelText:"No"},n.a.createElement(H.a,{style:{color:"white"}}))))),n.a.createElement(ne,{artSrc:s})):n.a.createElement("div",{className:"artPart__main_picture_inputs"},n.a.createElement("input",{disabled:p,style:{display:"none"},name:"file",type:"file",id:"file",onChange:c}),n.a.createElement("label",{htmlFor:"file"},n.a.createElement(ae.a,{style:{fontSize:"3vh",color:"grey",marginBottom:"1vh",cursor:"pointer"}})),n.a.createElement(z.a,{disabled:p,style:{width:"100%"},showSearch:!0,placeholder:"Select illustration"},i.map((function(e){var a=e.name,r=e.src;return n.a.createElement(re,null,n.a.createElement("div",{className:"illustSelect"},n.a.createElement("div",{className:"illustSelect__actions",onClick:function(){return u(r)}},a)))})))))),n.a.createElement(le,k))}),ne=(r(282),function(e){var a=e.artSrc,r=e.clickHandler,o=void 0===r?function(){}:r,c=Object(t.useRef)(null),s=Object(t.useRef)(null),i=Object(t.useState)({width:"auto",height:"auto"}),l=Object(S.a)(i,2),u=l[0],d=l[1],p=Object(t.useState)(null),m=Object(S.a)(p,2),h=m[0],v=m[1],f=Object(t.useState)(!0),E=Object(S.a)(f,2),b=E[0],k=E[1],_=Object(t.useState)(!1),w=Object(S.a)(_,2),j=w[0],g=w[1];return Object(t.useEffect)((function(){if(s.current){if(h!==a)return v(a),d({width:"auto",height:"auto"}),void g(!1);var e=s.current,r=e.naturalHeight,t=e.naturalWidth,n=c.current,o=n.offsetHeight,i=n.offsetWidth;if(0===r&&0===t)return void k(!b);u.width===u.height&&0!==r&&0!==t&&(d(t/r>i/o?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}),g(!0))}})),n.a.createElement("div",{ref:c,className:"boxImage",onClick:o},n.a.createElement("img",{style:{opacity:j?1:0},ref:s,width:u.width,height:u.height,src:h}))}),oe=(r(283),r(62)),ce=(r(284),function(e){var a=e.data,r=e.current,t=e.clickHandler;return n.a.createElement("div",{className:"leaf"},a&&n.a.createElement("div",{className:"leaf__tail"}),a?n.a.createElement(oe.a,{placement:"bottom",title:"".concat(a.branch.branchDirection)},n.a.createElement("div",{onClick:t,className:T()("leaf__main",r&&"leaf__main-current")},a&&function(){for(var e=[],r=a.branch.boost,t=0;t<a.branch.choseCount;){var o=a.branch["q"+t].branch.boost;o>r?e.push(n.a.createElement("div",{style:{bottom:"1.25vh",height:3.5*(o-r)+"vh"},className:"leaf__main_connect"})):o<r&&e.push(n.a.createElement("div",{style:{top:"1.25vh",height:3.5*(r-o)+"vh"},className:"leaf__main_connect"})),t++}return e}(),n.a.createElement("div",{className:"leaf__main_pods"},a.branch.base.length),a.branch.question&&n.a.createElement(oe.a,{title:"".concat(a.branch.question.main)},n.a.createElement("div",{className:T()("leaf__boll","leaf__boll-right")})),a.hasOwnProperty("ans")&&n.a.createElement(oe.a,{title:"".concat(a.ans)},n.a.createElement("div",{className:T()("leaf__boll","leaf__boll-left")})))):null)}),se=(r(285),function(e){var a=e.branchDirection,r=e.wayDirection,o=e.branchHandler,c=e.wayHandler,s=e.row,i=e.readOnly,l=Object(t.useState)("branch"),u=Object(S.a)(l,2),d=u[0],p=u[1];var m={firstVal:"Branch",firstHandler:function(){return p("branch")},secondVal:"Way",secondHandler:function(){return p("path")},checkData:"branch"===d};return n.a.createElement("div",{className:"directons"},n.a.createElement(M,{disabled:"path"===d,readOnly:i,value:"path"===d?r:a,row:s,placeholder:"path"===d?"Way (SOON)":"Branch dir..",changeHandler:function(e){"path"===d?c(e):o(e)}}),n.a.createElement(le,m))}),ie=(r(286),$.a.CheckableTag),le=function(e){var a=e.firstVal,r=e.firstHandler,t=e.secondVal,o=e.secondHandler,c=e.checkData;return n.a.createElement("div",{className:"checkTags"},n.a.createElement("div",{style:{flex:"5"}},n.a.createElement(ie,{checked:c,onClick:function(){return!c&&r()}},a)),n.a.createElement("div",{style:{flex:"5"}},n.a.createElement(ie,{checked:!c,onClick:function(){return c&&o()}},t)))},ue=r(179),de=function(e){return{type:"ADD_PROJECT",payload:e}},pe=function(e){return{type:"OPEN_PLACE",payload:e}},me=function(e){return{type:"ADD_FRIEND",payload:e}},he=function(e){return{type:"CHANGE_BRANCH",payload:e}},ve=function(e){return{type:"CHANGE_MASTER",payload:e}},fe=function(e){return{type:"CHOOSE_PERSON",payload:e}},Ee=function(e){return{type:"ACCESS_CONTROL",payload:e}},be=function(e){return{type:"UPDATE_DATA",payload:e}},ke=r(180),_e=r(69),we=r.n(_e);we.a.defaults.baseURL=window.location.origin,we.a.defaults.headers.common.token=localStorage.token,window.axios=we.a,window.sendErrors=function(e){we.a.post("/error",{message:e,data:window.reduxHistory}).then((function(){return console.log("%c%s","color: mediumseagreen; font-size: 20px;","\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0447\u0442\u043e \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442\u0435 \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u0441\u043e\u0444\u0442. \u0415\u0441\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043f\u0440\u043e\u0439\u0434\u0435\u0442, \u0442\u043e \u043f\u0438\u0448\u0438\u0442\u0435 \u043c\u043d\u0435 \u043b\u0438\u0447\u043a\u0443: https://vk.com/es_ilias")}))};var je=we.a,ge=function(e){return je.post("/auth/login",e)},Pe=function(e){return je.post("/auth/register",e)},De=function(){return je.post("/auth/check")},Oe=r(181),Ce=r.n(Oe)()(window.location.origin,{transports:["polling"]});Ce.on("connect",(function(){})).on("FORB",(function(){delete localStorage.token})).on("FORBIDDEN",(function(){})).on("VERSION_UPDATE",(function(e){I.dispatch(be({data:e,address:"versions"}))})).on("NEW_VERSION",(function(e){})).on("NEW_ACCESS",(function(e){I.dispatch(Ee({event:"NEW",pass:e}))})).on("NEW_SUPER_ACCESS",(function(e){b({type:"success",message:"New super access",description:"From ".concat(e.nickName)}),I.dispatch(Ee({event:"NEW_SUPER",pass:e}))})).on("KICK",(function(e){I.dispatch(Ee({event:"KICK",pass:e}))})).on("SUPER_KICK",(function(e){I.dispatch(Ee({event:"SUPER_KICK",pass:e}))})).on("FRIEND_REQUEST",(function(e){var a=e.user;b({type:"info",message:"New request to friend"}),I.dispatch({type:"UPDATE_APPLICANT_LIST",payload:a})})).on("ACCEPT_REQUEST",(function(e){var a=e.user;I.dispatch(me(a))})).on("NEW_FRIEND",(function(e){var a=e.user;b({type:"success",message:"Accept request",description:"New friend: ".concat(a.userData.nickName)}),I.dispatch(me(a))})).on("NEW_AVAILABLES",(function(e){var a=e.person,r=e.workPCD,t=e.payload,n=e.sender;I.getState().main.personObj.userData.superId!==n&&I.dispatch(be({data:{person:a,workPCD:r,pass:t},address:"available"}))})).on("NEW_ILLUSTRATIONS",(function(e){var a=e.person,r=e.workPCD,t=e.newIllust,n=e.action;e.sender;I.dispatch(be({data:{person:a,newIllust:t,action:n,workPCD:r},address:"illustrations"}))})).on("REQUEST_RIGHT",(function(e){var a=e.sender,r=I.getState().main,t=r.personObj.userData.superId,n=r.friends;t!==a&&function(){var e;n.forEach((function(r){var t=r.userData,n=t.superId,o=t.nickName;n!==a||(e=o)})),b({type:"info",message:"Right request",description:"By ".concat(e)})}()})).on("NEW_FRIEND_PROJECT",(function(e){var a=e.project,r=e.sender;I.getState().main.personObj.userData.superId!==r&&I.dispatch({type:"NEW_FRIEND_PROJECT",payload:{personId:r,project:a}})})).on("NEW_FRIEND_VERSION",(function(e){var a=e.person,r=e.projectId,t=e.workVersion,n=e.sender;I.getState().main.personObj.userData.superId!==n&&I.dispatch(be({data:{person:a,projectId:r,workVersion:t},address:"new_version"}))})).on("DELETE",(function(e){var a=e.person,r=e.workPCD,t=e.target;e.sender;I.dispatch(be({data:{person:a,workPCD:r,target:t},address:"delete"}))}));var Ne=null;I.subscribe((function(){var e=I.getState();if(e.main.workBranch&&Ne!==e.main.workBranch.v){var a=e.main,r=a.projectsCoordsData,t=a.workBranch.v,n=a.workPerson,o=a.workPCD,c=a.projects,s=a.personObj,i=a.availablePayload,l=localStorage.token,u=e.main.projects?e.main.projects[0]:null,d=s.userData.myLastProject;switch((t+"").substring(0,1)){case"c":Ce.emit("UPDATE_PCD",{token:l,pcd:r,person:n,lastProject:o?o.projectId:null,myLastProject:d,friends:s.userData.friends});break;case"p":Ce.emit("UPDATE_PROJECTS",{token:l,pcd:r,workVersion:function(){var a,r,t=e.main,n=t.projects,o=t.workPCD,c=o.projectId,s=o.workVersion;for(var i in n)n[i].superId===c&&(a=i);for(var l in n[a].versions)n[a].versions[l].superId===s&&(r=l);return n[a].versions[r].data}(),projectId:o.projectId,versionId:o.workVersion,person:n});break;case"n":Ce.emit("NEW_PROJECT",{token:l,project:u,pcd:r,myLastProject:d});break;case"v":!function(){var e=o.workVersion,a=o.projectId;Ce.emit("NEW_VERSION",{token:l,pcd:r,person:n,projectId:a,versionId:e,workVersion:function(){var r,t;for(var n in c)c[n].superId===a&&(r=n);for(var o in c[r].versions)c[r].versions[o].superId===e&&(t=o);return c[r].versions[t]}()})}();break;case"s":!function(){var a,r=e.main,t=r.kicked,n=r.superKicked,s=r.newObservers,i=r.newEditord;for(var u in c)c[u].superId===o.projectId&&(a=u);var d=c[a],p=d.name,m=d.description,h=d.access,v=d.superAccess;Ce.emit("SETUP_PROJECT",{token:l,projectData:{name:p,description:m,access:h,superAccess:v},projectId:o.projectId,kicked:t,superKicked:n,newObservers:s,newEditord:i})}();break;case"a":Ce.emit("UPDATE_AVAILABLE",{token:localStorage.token,workPCD:o,person:n,payload:i})}Ne=t}}));var Ie=Ce,ye=function(e){return{type:"INIT",payload:e}},Se=function(e){var a=e.status,r=e.token,t=e.data,n=e.msg,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){"success"===a?(b({type:a,message:g(a),description:n}),localStorage.token=r,Ie.emit("JOIN",{token:localStorage.token}),e(ye(t))):(b({type:a,message:g(a),description:n}),o&&delete localStorage.token)}},Ae=Object(s.b)((function(e){var a=e.main,r=a.workBranch,t=a.workPCD,n=a.projects,o=a.personObj,c=a.workPerson,s=[],i=[],l=null,u=!1,d=!1,p=o.userData.nickName;if(null!==t){k(n,t.projectId,"superId",s),k(n[s[0]].versions,t.workVersion,"superId",i),l=n[s[0]].versions[i[0]].master;var m=n[s[0]].superAccess;(d=m.includes(o.userData.superId)||m.includes("all"))&&(null!==l&&l!==p||(u=!0))}return{master:l,illustrations:t?n[s[0]].versions[i[0]].illustrations:[],nickName:p,v:r.v,workBranch:r,person:c,workPCD:t,accessed:u,superAccessed:d,paths:t?n[s[0]].versions[i[0]].paths:[],currentHeight:t?t[t.workVersion].height:null}}),{savePod:function(e){return{type:"SAVE_POD",payload:e}},changeBranch:he,changeMaster:ve,setIllustrations:function(e){return{type:"SET_ILLUSTRATIONS",payload:e}}})((function(e){var a=e.savePod,r=e.workBranch,o=e.currentHeight,c=e.changeBranch,s=e.v,i=e.master,l=e.nickName,u=e.person,p=e.workPCD,m=e.changeMaster,v=e.illustrations,f=e.accessed,E=e.superAccessed,b=Object(t.useState)("0"),k=Object(S.a)(b,2),_=k[0],w=k[1],j=Object(t.useState)({label:"",mainPart:"",comment:"",artsDesription:"",artSrc:null,branchDirection:"",answers:[],activeKey:"0"}),g=Object(S.a)(j,2),P=g[0],D=g[1],O=Object(t.useState)({checkHeight:null,checkPath:null}),C=Object(S.a)(O,2),N=C[0],I=C[1],y=Object(t.useState)(null),A=Object(S.a)(y,2),B=A[0],V=A[1];Object(t.useEffect)((function(){var e=r.pos,a=N.checkHeight,t=N.checkPath,n=N.checkV;if(r.branch.base&&(o!==a||e!==t||s!==n&&"a"!==s[0])){var c="question"!==o?r.branch.base[o]:r.branch.question,i=c.label,l=c.main,u=c.comment,d=c.picture,p=d.src,m=d.alt,h=[{content:"",key:"0",closable:!1,ref:""},{content:"",key:"1",closable:!1,ref:""}],f=r.branch,E=f.choseCount;if(E){for(var b=[],k=0;k<E;k++){var _=f["q"+k],j=_.ans,g=_.branch,P=g.ref;g.wayId;b.push({content:j,key:k+"",closable:E>2,ref:P||""})}h=b}D({label:i,mainPart:l,comment:u,artsDesription:m,artSrc:v.some((function(e){return e.src===p}))?p:null,answers:h,activeKey:"0",branchDirection:r.branch.branchDirection}),I({checkHeight:o,checkPath:e,checkV:s}),w("question"!==o?"0":"1"),V(r.v)}}));var H=null===i;function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;V(!1),H&&m(!0),e&&e()}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;D(Object(d.a)(Object(d.a)({},P),{},{artSrc:e}))}var W=P.label,F=P.mainPart,K=P.comment,G=P.artsDesription,x=P.branchDirection,z=P.wayDirection,Q=P.answers,X=P.activeKey,Y=P.artSrc;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"editor__left"},n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{className:"editor__left_dropMenu"},n.a.createElement(q,{disabled:!f,clickHandler:function(){null!==o&&(0===r.branch.choseCount||"question"===o)&&L(w("0"===_?"1":"0"))}},"0"===_?"POD":"QUESTION")),n.a.createElement("div",{className:"editor__left_label"},n.a.createElement(R,{readOnly:!f,value:W,placeholder:"Label",changeHandler:function(e){e.persist(),D(Object(d.a)(Object(d.a)({},P),{},{label:e.target.value})),L()}}))),n.a.createElement("div",{className:"editor__left_dialog"},n.a.createElement(M,{readOnly:!f,value:F,row:10,placeholder:"Main part",changeHandler:function(e){D(Object(d.a)(Object(d.a)({},P),{},{mainPart:e})),L()}})),n.a.createElement("div",{className:"editor__left_comment"},n.a.createElement(M,{readOnly:!f,value:K,row:6,placeholder:"Comment/analysis",changeHandler:function(e){D(Object(d.a)(Object(d.a)({},P),{},{comment:e})),L()}})),n.a.createElement("div",{className:T()("editor__left_tabs","editor__left_tabs"+("1"===_?"-show":"-hide"))},n.a.createElement(J,{readOnly:!f,setAnswers:function(e){var a=e.activeKey,r=e.panes;D(Object(d.a)(Object(d.a)({},P),{},{answers:r,activeKey:a})),L()},setActiveKey:function(e){var a=e.activeKey;return D(Object(d.a)(Object(d.a)({},P),{},{activeKey:a}))},value:{panes:Q,activeKey:X}}),r.branch["q"+X]&&B&&n.a.createElement("div",{className:T()("editor__left_tabs_cross")},n.a.createElement(q,{clickHandler:function(){c(+X)}},"CROSS")))),n.a.createElement("div",{className:"editor__right"},n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{className:"editor__right_master"},n.a.createElement("div",{className:"editor__right_master_status"},"M: ".concat(i)),n.a.createElement("div",{className:"editor__right_master_btn"},n.a.createElement(q,{disabled:!E,clickHandler:function(){H&&m(!0),i===l?m(!1):Ie.emit("REQUEST_RIGHT",{token:localStorage.token,person:u})}},H?"Stay master":i===l?"Give away right":"Request the right"))),n.a.createElement("div",{className:"editor__right_save"},n.a.createElement("div",{className:"editor__right_save_info"},!B&&n.a.createElement("div",null,"*")),n.a.createElement("div",{className:"editor__right_save_btn"},n.a.createElement(q,{disabled:!f,clickHandler:function(){a({selectedType:_,data:P}),V(!0)}},"SAVE")))),n.a.createElement("div",{className:"editor__right_dialog"},n.a.createElement(te,{readOnly:!f,artSrc:Y,value:G,row:10,mentionsHandler:function(e){D(Object(d.a)(Object(d.a)({},P),{},{artsDesription:e})),L()},fileHandler:function(e){!function(e){e.persist();var a=new FormData,r=e.target.files[0],t=r.name.substring(0).split("."),n="".concat(Object(h.a)(),".").concat(t[t.length-1]);a.append("picture",r,r.name);var o=window.location.origin;je.post("/image",a,{headers:{"Content-Type":"multipart/form-data",newname:n}}).then((function(a){var r=a.data,t=o+r,n={name:e.target.files[0].name,src:t};Ie.emit("SET_ILLUSTRATIONS",{token:localStorage.token,person:u,workPCD:p,newIllustration:n,action:"ADD"}),D(Object(d.a)(Object(d.a)({},P),{},{artSrc:t}))}))}(e),L()},illustrations:v,unsetIllust:U,setIllust:U,removeIllust:function(e){var a;D(Object(d.a)(Object(d.a)({},P),{},{artSrc:null}));var r,t=Object(ue.a)(v);try{for(t.s();!(r=t.n()).done;){var n=r.value;n.src===e&&(a=n)}}catch(o){t.e(o)}finally{t.f()}Ie.emit("SET_ILLUSTRATIONS",{token:localStorage.token,person:u,workPCD:p,newIllustration:a,action:"REMOVE"})}})),n.a.createElement("div",{className:"editor__right_branchDir"},n.a.createElement(se,{readOnly:!f,row:7,wayHandler:function(){return{}},branchHandler:function(e){D(Object(d.a)(Object(d.a)({},P),{},{branchDirection:e})),L()},wayDirection:z,branchDirection:x})),n.a.createElement("div",{className:T()("editor__right_metaData","editor__right_metaData"+("1"===_?"-show":"-hide"))},n.a.createElement(M,{disabled:!0,row:6,placeholder:"Meta data (SOON)"}))))})),Te=Object(s.b)((function(e,a){var r=e.main,t=r.friends,n=r.projects,o=r.workPCD,c=r.workPerson,s=r.personObj.userData,i=s.nickName,l=s.superId,u={friends:t,nickName:i,personSId:l,projects:n,workPCD:o,workPerson:c};if(a.isSetup&&o){var d=[],p=[];k(n,o.projectId,"superId",d),k(n[d[0]].versions,o.workVersion,"superId",p),u.versionComment=n[d[0]].versions[p[0]].comment}return u.isOwner=c===l,u}),{addProject:de,setupProject:function(e){return{type:"SETUP_PROJECT",payload:e}},saveVersion:function(e){return{type:"SAVE_VERSION",payload:e}}})((function(e){var a=e.addProject,r=e.friends,o=e.personSId,c=e.projects,s=e.workPCD,i=e.isSetup,l=e.setupProject,u=e.workPerson,p=e.versionComment,m=e.isOwner,h=e.saveVersion,v=Object(t.useState)({name:"",description:"",access:[],superAccess:[]}),f=Object(S.a)(v,2),E=f[0],b=f[1],k=Object(t.useState)({comment:""}),_=Object(S.a)(k,2),w=_[0],j=_[1];function g(e){var a=[];return e.includes("all")&&a.push("all"),e.forEach((function(e){r.forEach((function(r){var t=r.userData,n=t.superId,o=t.nickName;e===o&&a.push(n)}))})),a}function P(e){Ie.emit("DELETE",{token:localStorage.token,workPCD:s,workPerson:u,target:e})}return Object(t.useEffect)((function(){var e=E.access,a=E.superAccess;if(!e.length||!a.length)if(i){var r;for(var t in c)c[t].superId===s.projectId&&(r=t);var n=c[r],l=n.access,u=n.superAccess,m=n.name,h=n.description;b({name:m,description:h,access:l,superAccess:u})}else b(Object(d.a)(Object(d.a)({},E),{},{access:[o],superAccess:[o]}));i&&!w.comment.length&&j({comment:p})})),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"project__upPart"},n.a.createElement("div",{className:"project__upPart_input"},n.a.createElement(R,{readOnly:!m,placeholder:"name",changeHandler:function(e){e.persist(),console.log(e.target.value),b(Object(d.a)(Object(d.a)({},E),{},{name:e.target.value+""}))},value:E.name})),n.a.createElement("div",{className:"project__upPart_space"}),n.a.createElement("div",{className:"project__upPart_createBtn"},n.a.createElement(q,{disabled:!m,clickHandler:function(){i&&l(E),!i&&a(E)}},i?"SAVE PROJECT":"CREATE"))),n.a.createElement("div",{className:"project__bottomPart"},n.a.createElement("div",{className:"project__bottomPart_description"},n.a.createElement(M,{readOnly:!m,value:E.description,row:2,placeholder:"description",changeHandler:function(e){b(Object(d.a)(Object(d.a)({},E),{},{description:e+""}))}})),n.a.createElement("div",{className:"project__bottomPart_access"},n.a.createElement("p",null,"\u042e\u0437\u0435\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442:"),n.a.createElement(X,{disabled:!m,isCreate:!1===i,isSuper:!1,changeHandler:function(e){return b(Object(d.a)(Object(d.a)({},E),{},{access:[E.access[0]].concat(g(e))}))}})),n.a.createElement("div",{className:"project__bottomPart_access"},n.a.createElement("p",null,"\u042e\u0437\u0435\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0435\u0440\u0441\u0438\u0438 \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435, \u043f\u0440\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438:"),n.a.createElement(X,{disabled:!m,isCreate:!1===i,isSuper:!0,changeHandler:function(e){return b(Object(d.a)(Object(d.a)({},E),{},{superAccess:[E.superAccess[0]].concat(g(e))}))}})),i&&m&&n.a.createElement("div",{className:"project__bottomPart_delete"},n.a.createElement("div",{className:"project__bottomPart_delete_space"}),n.a.createElement("div",{className:"project__bottomPart_delete_btn"},n.a.createElement(q,{clickHandler:function(){return P("project")}},n.a.createElement(H.a,null)," DELETE PROJECT"))),n.a.createElement("div",{className:"handler"},"VERSION PART"),i&&n.a.createElement("div",{className:"project__versionPart"},n.a.createElement("div",{className:"project__versionPart_top"},n.a.createElement("div",{className:"project__versionPart_top_comment"},n.a.createElement(R,{placeholder:"name",changeHandler:function(e){e.persist(),console.log(e.target.value),j({comment:e.target.value})},value:p})),n.a.createElement("div",{className:"project__versionPart_top_space"}),n.a.createElement("div",{className:"project__versionPart_top_save"},n.a.createElement(q,{clickHandler:h},"SAVE VERSION"))),m&&n.a.createElement("div",{className:"project__versionPart_bottom"},n.a.createElement("div",{className:"project__versionPart_bottom_space"}),n.a.createElement("div",{className:"project__versionPart_bottom_deleteBtn"},n.a.createElement(q,{clickHandler:function(){return P("version")}},n.a.createElement(H.a,null)," DELETE VERSION "))))))})),Be=r(100),Re=Object(s.b)((function(e){return Object(Be.a)(e),{}}),{addVersion:function(e){return{type:"ADD_VERSION",payload:e}}})((function(e){var a=e.addVersion,r=Object(t.useState)({comment:"",description:""}),o=Object(S.a)(r,2),c=o[0],s=o[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"version__input"},n.a.createElement(R,{placeholder:"comment",changeHandler:function(e){e.persist(),console.log(e.target.value),s(Object(d.a)(Object(d.a)({},c),{},{comment:e.target.value+""}))}})),n.a.createElement("div",{className:"version__space"}),n.a.createElement("div",{className:"version__createBtn"},n.a.createElement(q,{clickHandler:function(){a(c)}},"CREATE")))})),Ve=z.a.Option,He=Object(s.b)((function(e){var a=e.main,r=a.friends,t=a.personObj.userData,n=t.superId,o=t.applicantList,c=a.accessV,s=a.workPerson,i=a.friendV;return{friends:r,superId:n,applicantList:o,L:o.length,fL:r.length,workPerson:s,accessV:c,friendV:i}}),{choosePerson:fe,updateUsers:function(e){return{type:"UPDATE_USERS",payload:e}},previewPerson:function(e){return{type:"PREVIEW_PERSON",payload:e}},cleanApplicantList:function(e){return{type:"CLEAN_APPLICANT_LIST",payload:e}},updateData:be,changeMaster:ve})((function(e){var a=e.friends,r=e.superId,o=e.choosePerson,c=e.applicantList,s=e.cleanApplicantList,i=e.updateData,l=e.changeMaster,u=Object(t.useState)(null),d=Object(S.a)(u,2),p=d[0],m=d[1],h=Object(t.useState)(null),v=Object(S.a)(h,2),f=v[0],E=v[1],_=Object(t.useState)(null),w=Object(S.a)(_,2),j=w[0],g=w[1],P=Object(t.useState)([]),D=Object(S.a)(P,2),O=D[0],C=D[1],N=p?p.friends.some((function(e){return e.superId===r})):null;Object(t.useEffect)((function(){if(null===j&&(Ie.emit("GET_USERS",{token:localStorage.token}),Ie.on("NEW_USERS",(function(e){var a=e.users;return g(a)}))),!p||N||f&&f.userData.superId===p.superId){if(p&&(!f||f.userData.superId!==p.superId)){var e;for(var r in a)a[r].userData.superId===p.superId&&(e=r);E(a[e])}}else Ie.emit("GET_USERS_DETAIL",{token:localStorage.token,personId:p.superId}),Ie.on("NEW_USERS_DETAIL",(function(e){var a=e.user;E(a)}));return c.length!==O.length&&(Ie.emit("GET_COMRADE_DETAIL",{token:localStorage.token}),Ie.on("NEW_COMRADE_DETAIL",(function(e){var a=e.comrades;C(a)}))),function(){var e=I.getState().main,a=e.mainPlace,r=e.workPerson,t=e.personObj.userData.superId;p&&t===r&&"social"!==a&&Ie.emit("UNSUBSCRIBE_USER",{token:localStorage.token,personId:p.superId})}}));var y=f&&f.projects.filter((function(e){var a=e.access;return a.includes(r)||a.includes("all")}));function A(e){Ie.emit("ACCEPT_REQUEST",{token:localStorage.token,personId:e}),s(e),C(O.filter((function(a){return a.superId!==e})))}new FormData,f&&(f.userData.superId,p.superId);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"social__chusedUser"},p?n.a.createElement("div",{className:"social__chusedUser--WRAPPER"},n.a.createElement("div",{className:"social__chusedUser_showProfile"},m.src?n.a.createElement("div",{className:"social__chusedUser_showProfile_avatar"},n.a.createElement("img",{src:m.src,alt:""})):n.a.createElement("div",{className:"social__chusedUser_showProfile_avatar_plug"},p.nickName.substring(0,2))),N&&n.a.createElement("div",{className:"social__chusedUser_chuseProfile"},n.a.createElement(q,{clickHandler:function(){y.length&&N?(Ie.emit("SUBSCRIBE_USER",{token:localStorage.token,personId:f.userData.superId}),Ie.on("NEW_SUBSCRIBE_USER",(function(e){var a=e.friendObj;l(!1),i({data:a,address:"friend"}),o(p.superId)}))):b({type:"warning",message:"Restriction",description:"The user must have at least one project"})}},"Choose profile")),!N&&n.a.createElement("div",{className:"social__chusedUser_addToFriend"},n.a.createElement(q,{clickHandler:function(){Ie.emit("FRIEND_REQUEST",{token:localStorage.token,person:p})}},"Add to comrades")),n.a.createElement("div",{className:"social__chusedUser_projectCount"},f&&"Count of available projects: ".concat(y.length))):n.a.createElement("div",{className:"social__chusedUser_plug"},"Selected person")),j&&n.a.createElement("div",{className:"social__findUser"},n.a.createElement(z.a,{showSearch:!0,style:{width:"100%"},placeholder:"Users",onSelect:function(e){var a=[];k(j,e,"nickName",a),m(j[a[0]])}},j.map((function(e){var a=e.nickName;return n.a.createElement(Ve,{value:a},a)})))),n.a.createElement("div",{className:"social__findFriend"},n.a.createElement(z.a,{showSearch:!0,style:{width:"100%"},placeholder:"Friends",onSelect:function(e){var r=[];k(a,e,["userData","nickName"],r),Ie.emit("SUBSCRIBE_USER",{token:localStorage.token,personId:a[r[0]].userData.superId}),Ie.on("NEW_SUBSCRIBE_USER",(function(e){var a=e.friendObj;i({data:a,address:"friend"}),m(a.userData)}))}},a.length&&a.map((function(e){var a=e.userData.nickName;return n.a.createElement(Ve,{value:a},a)})))),n.a.createElement("div",{className:"social__requestToFriend"},O.length?n.a.createElement("div",{className:"social__requestToFriend_list"},O.map((function(e){var a=e.nickName,r=e.src,t=e.projectCount,o=e.superId;return n.a.createElement(Y,{onAdd:A,nickName:a,src:r,projectCount:t,superId:o})}))):n.a.createElement("div",{className:"social__requestToFriend_plug"},"No requests")))})),Le=(r(334),Object(s.b)((function(){return{}}),{logOut:function(){return{type:"LOGOUT"}}})((function(e){var a=e.logOut;return n.a.createElement("div",{className:"profile"},n.a.createElement("div",{className:"profile__firstLine"},n.a.createElement("div",{className:"profile__firstLine_space"}),n.a.createElement("div",{className:"profile__firstLine_btn"},n.a.createElement(q,{clickHandler:function(){Ie.emit("LOGOUT",{token:localStorage.token}),a()}},"LOGOUT"))))}))),Ue=(r(335),Object(s.b)((function(e){return{mainPlace:e.main.mainPlace}}),{openPlace:pe})((function(e){var a=e.mainPlace,r=e.openPlace,o=Object(t.useState)([{name:null,payload:n.a.createElement("div",null)}]),c=Object(S.a)(o,2),s=c[0],i=c[1];return Object(t.useEffect)((function(){if(s[0].name!==a){var e;switch(a){case"editor":e=n.a.createElement("div",{className:T()("editor")},n.a.createElement(Ae,null));break;case"project":e=n.a.createElement("div",{className:T()("project")},n.a.createElement(Te,{isSetup:!1}));break;case"version":e=n.a.createElement("div",{className:T()("version")},n.a.createElement(Re,null));break;case"setup":e=n.a.createElement("div",{className:T()("project")},n.a.createElement(Te,{isSetup:!0}));break;case"beginner":e=n.a.createElement("div",{className:T()("beginner")},n.a.createElement(q,{clickHandler:function(){return r("project")}},"CREATE YOUR FIRST PROJECT"));break;case"social":e=n.a.createElement("div",{className:T()("social")},n.a.createElement(He,null));break;case"choose":e=n.a.createElement("div",{className:"choose"},"Choose project");break;case"error":e=n.a.createElement("div",{className:"error"},"Project, version or pod was deleted, rechoose project.");break;case"profile":e=n.a.createElement("div",{className:"profile"},n.a.createElement(Le,null))}i([{name:a,payload:e}])}})),n.a.createElement("div",{className:"main"},s[0].payload)}))),We=function(){return n.a.createElement("div",{className:"navbar__branch"},n.a.createElement("div",{className:"navbar__branch_podsInput"},n.a.createElement(R,{place:"navbar",placeholder:"Pods height (SOON)",changeHandler:function(e){e.persist()}})))},qe=Object(s.b)((function(e){var a=e.main,r=a.projects,t=a.workPCD,n=a.workBranch,o=a.personObj,c=a.workPerson,s=!1,i=function(e){return e.includes(o.userData.superId)||e.includes("all")};if(t){var l=[];k(r,t.projectId,"superId",l),s=i(r[l[0]].superAccess)}return{projects:r.filter((function(e){var a=e.access;return i(a)})),projectId:t?t.projectId:null,workVersion:t?t.workVersion:null,superAccessed:s,isOwner:c===o.userData.superId,v:n.v}}),{addProject:de,openPlace:pe,selectProject:function(e){return{type:"SELECT_PROJECT",payload:e}},selectVersion:function(e){return{type:"SELECT_VERSION",payload:e}},changeMaster:ve})((function(e){for(var a=e.projects,r=e.superAccessed,t=e.isOwner,o=e.selectProject,c=e.selectVersion,s=e.projectId,i=e.workVersion,l=e.openPlace,u=e.changeMaster,d=void 0,p=0;p<a.length;p++)a[p].superId===s&&(d=p);var m=void 0;if(void 0!==d)for(var h in a[d].versions)a[d].versions[h].superId===i&&(m=h);function v(e){var a=e.data,r=e.addHandler,o=e.current,c=e.selectHandl,s=a.map((function(e,a){var r=e.name,t=e.date,c=e.superId,s=e.comment,i=void 0!==s&&s;return n.a.createElement(F.a.Item,{key:c+"",className:T()(c===o&&"ant-menu-item-selected")},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},n.a.createElement("span",null,i||r),n.a.createElement("span",null,t)))}));return n.a.createElement("div",{className:"setuper",style:{width:"100%",display:"flex",flexDirection:"column"}},t&&n.a.createElement("div",null,n.a.createElement(q,{clickHandler:r},"ADD NEW")),n.a.createElement(F.a,{onSelect:c},s))}return n.a.createElement("div",{className:"navbar__mainActions"},n.a.createElement("div",{className:"navbar__mainActions_projects"},n.a.createElement(K.a,{overlay:v({data:a,addHandler:function(){l("project")},current:s,selectHandl:function(e){o(e.key),u(!1)}}),onVisibleChange:function(e){return console.log("OnVisibleChange",e)}},n.a.createElement("div",null,n.a.createElement(R,{place:"navbar",placeholder:a.length&&void 0!==d?a[d].name:a.length?"Choose some-thing":"Let's create some-thing"})))),n.a.createElement("div",{className:"navbar__mainActions_saves"},a.length&&void 0!==d?n.a.createElement(K.a,{overlay:v({data:a[d].versions,addHandler:function(){l("version")},current:i,selectHandl:function(e){c(e.key),u(!1)}})},n.a.createElement("div",null,n.a.createElement(R,{place:"navbar",placeholder:a[d].versions[m].comment}))):n.a.createElement(R,{place:"navbar",placeholder:"Nonee"})),s&&n.a.createElement(n.a.Fragment,null,r&&n.a.createElement("div",{className:"navbar__mainActions_secure"},n.a.createElement(q,{place:"navbar",clickHandler:function(){return l("setup")}},"Setup")),n.a.createElement("div",{className:"navbar__mainActions_map"},n.a.createElement(q,{place:"navbar",clickHandler:function(){return l("map")}},"Map"))))})),Fe=Object(s.b)((function(e){var a=e.main;return{friends:a.friends,personObj:a.personObj,workPerson:a.workPerson}}),{openPlace:pe,chooseMe:function(e){return{type:"CHOOSE_ME",payload:e}},updateData:be,choosePerson:fe,changeMaster:ve})((function(e){var a=e.personObj,r=e.workPerson,t=e.friends,o=e.openPlace,c=e.chooseMe,s=e.updateData,i=e.choosePerson,l=e.changeMaster;var u=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.userData.src?n.a.createElement("div",{className:"avatar"},n.a.createElement("img",{src:"",alt:""})):n.a.createElement("div",{className:T()("avatar_alt",r&&"avatar_alt_me")}," ",a," ")};return n.a.createElement("div",{className:"navbar__social"},n.a.createElement("div",{className:"navbar__social_fastAccess"},t.length?n.a.createElement("div",{className:"friendsList"},t.slice(0,2).map((function(e){return n.a.createElement("div",{onClick:function(){return r=e.userData.superId,Ie.emit("SUBSCRIBE_USER",{token:localStorage.token,personId:r}),void Ie.on("NEW_SUBSCRIBE_USER",(function(e){var t=e.friendObj,n=a.userData.superId;t.projects.some((function(e){var a=e.access;return a.includes(n)||a.includes("all")}))?(l(!1),s({data:t,address:"friend"}),i(r)):b({type:"error",message:"Error",description:"Friend don't provide accesses"})}));var r}},u(e,e.userData.nickName.substring(0,2)))}))):"Fast access place..."),n.a.createElement("div",{className:"navbar__social_details"},n.a.createElement(q,{place:"navbar",clickHandler:function(){return o("social")}},"Details")),n.a.createElement("div",{className:"navbar__social_me",onClick:function(){var e=a.userData.superId;r!==e?(Ie.emit("GET_USERS_DETAIL",{token:localStorage.token,personId:e}),Ie.on("NEW_USERS_DETAIL",(function(a){var r=a.user;r.userData.superId===e&&c(r.projects)}))):o("profile")}},a&&u(a,"I",!0)))})),Me=(r(336),Object(s.b)((function(e){return{state:e}}),(function(e){return{}}))((function(){return n.a.createElement("div",{className:"navbar"},n.a.createElement(We,null),n.a.createElement(qe,null),n.a.createElement(Fe,null))}))),Ke=(r(337),Object(s.b)((function(e){var a=e.main,r=a.workBranch,t=a.workPCD,n=a.projects,o=a.personObj,c=!1,s=null,i=o.userData.nickName;if(t){var l=[],u=[];k(n,t.projectId,"superId",l),k(n[l[0]].versions,t.workVersion,"superId",u),s=n[l[0]].versions[u[0]].master;var d=n[l[0]].superAccess;(d.includes(o.userData.superId)||d.includes("all"))&&(null!==s&&s!==i||(c=!0))}return{workBranch:r,v:r.v,workPCD:t,master:s,currentHeight:t?t[t.workVersion].height:null,accessed:c}}),{addPod:function(e){return{type:"ADD_POD",payload:e}},deletePod:function(e){return{type:"DELETE_POD",payload:e}},choosePod:function(e){return{type:"CHOOSE_POD",payload:e}},changeBranch:he,changeMaster:ve})((function(e){var a=e.workBranch,r=e.master,t=(e.workPCD,e.accessed),o=(e.v,e.addPod),c=e.deletePod,s=e.choosePod,i=e.currentHeight,l=e.changeBranch,u=e.changeMaster,d=a.branch.base?a.branch.base.concat(a.branch.question?[a.branch.question]:[]):[],p=d.map((function(e){var a=e.coord.height,r=e.label,l=e.main;return n.a.createElement(U,{onAction:h,readOnly:!t,actived:i==a,label:r,main:l,height:a,onPlus:o,onDelete:c,onChoose:s,showDelete:d.length>1})})),m=null===r;function h(){m&&u(!0)}return n.a.createElement("div",{className:"branchWrapper"},n.a.createElement("div",{className:"branch"},p.length>0?n.a.createElement("div",{className:"branch__wrapper"},p):n.a.createElement("div",{className:"branch__plug"},"Projects pods...")),a.pos&&a.pos.length>1&&n.a.createElement("div",{className:"branch__goBackPlace"},n.a.createElement("div",{className:"branch__goBackPlace_button"},n.a.createElement(q,{clickHandler:function(){return l("back")},place:"navbar"},"Cross back"))))}))),Ge=r(347),xe=(r(338),Object(s.b)((function(e){return Object(Be.a)(e),{}}),{fetchUserData:function(){return function(e){new Promise((function(e,a){try{e(JSON.parse(ke))}catch(r){a(!1),console.log("Error parse data json")}})).then((function(a){return e({type:"SET_PROJECTS_DATA",payload:a})}))}},userLogin:function(e){return function(a){ge(e).then((function(e){Se(e.data)(a)})).catch((function(e){console.log("%c%s","color: red; font-size: 25px;","Error login: ",e)}))}},autoLoginWithToken:function(){return function(e){De().then((function(a){Se(a.data,!0)(e)})).catch((function(e){console.log("%c%s","color: red;font-size:33px;","AUTO_LOGIN_ERR:",e)}))}},createUser:function(e){return function(a){Pe(e).then((function(e){Se(e.data)(a)})).catch((function(e){console.log("%c%s","color: red; font-size: 25px;","Error createUser: ",e)}))}}})((function(e){e.fetchUserData;var a=e.userLogin,r=e.autoLoginWithToken,o=e.createUser,c=Object(t.useRef)(null),s=Object(t.useState)(null),i=Object(S.a)(s,2),l=i[0],u=i[1],p=Object(t.useState)("create"),m=Object(S.a)(p,2),h=m[0],v=m[1],f=Object(t.useState)({nickName:"",password:"",secondPassword:""}),E=Object(S.a)(f,2),b=E[0],k=E[1],_=b.nickName,w=b.password,j=b.secondPassword,g=function(e){var a=e.children,r=e.src;return n.a.createElement("span",{onMouseEnter:function(){return u(r)},onMouseLeave:function(){return u(null)},className:"activeText"},a)};function P(e){e.preventDefault();var r=!1;w.length<3&&(r=!0,Ge.a.error("Password too short")),_.length<3&&(r=!0,Ge.a.error("NickName too short")),"create"===h?(w!==j&&(r=!0,Ge.a.error("Passwords are not equal")),!r&&o(b)):!r&&a(b)}Object(t.useEffect)((function(){console.log("SHOW:",l),localStorage.token&&r()}));var D={firstVal:"LOGIN",firstHandler:function(){return v("login")},secondVal:"CREATE NEW",secondHandler:function(){return v("create")},checkData:"login"===h},O=window.location.origin+"/uploads/";return n.a.createElement("div",{ref:c,className:T()("login")},l&&n.a.createElement("div",{className:"help"},n.a.createElement("img",{src:O+l})),n.a.createElement("div",{className:"login__header"},n.a.createElement("div",{className:"login__header_main"},"DecodeMe"),n.a.createElement("div",{className:"login__header_dls"},"Editor (alpha)")),n.a.createElement("div",{className:"achtung"},n.a.createElement("div",{className:"achtung__header"},n.a.createElement("h1",null,"Achtung! "),n.a.createElement("div",{className:"achtung__header_help"},"\u0417\u0435\u043b\u0435\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u0435\u043d.")),n.a.createElement("div",{className:"achtung__payload"},"\u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c \u043f\u0440\u043e\u0448\u0443 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u0441\u043f\u043e\u043a\u043e\u0439\u0441\u0442\u0432\u0438\u0435,  ",n.a.createElement(g,{src:"devtools.png"},"\u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430")," \u0438 \u0432\u044b\u0431\u0440\u0430\u0442\u044c"," ",n.a.createElement(g,{src:"console.png"},"\u0432\u043a\u043b\u0430\u0434\u043a\u0443 \u0441 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u044e.")," \u041f\u043e\u0441\u043b\u0435 \u0447\u0435\u0433\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u044c: ",n.a.createElement(g,{src:"code.png"},'window.sendErrors("\u041b\u044e\u0431\u043e\u0439 \u0432\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439.\n        \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u0447\u0442\u043e \u0431\u044b \u043e\u043d \u0431\u044b\u043b \u0432 \u043a\u043e\u0432\u044b\u0447\u043a\u0430\u0445")')," \u041a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \n        \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0430\u0436\u043c\u0438\u0442\u0435 Enter.\n        \u0421\u0430\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0438\u0441\u043f\u044b\u0442\u0430\u0442\u044c \u0441\u0435\u0431\u044f \u0432 \u0440\u043e\u043b\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430). \u041c\u0435\u043d\u044f \u0432\u0441\u0435\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 ",n.a.createElement("a",{target:"_blank",className:"me",href:"https://vk.com/es_ilias"},"\u0437\u0434\u0435\u0441\u044c"),".")),n.a.createElement("div",{className:"login__main"},n.a.createElement(le,D),n.a.createElement("form",{onSubmit:P},n.a.createElement("div",{className:T()("form")},n.a.createElement(R,{placeholder:"Nickname",changeHandler:function(e){e.persist(),k(Object(d.a)(Object(d.a)({},b),{},{nickName:e.target.value}))},value:_})),n.a.createElement("div",{className:T()("form","form__password")},n.a.createElement(R,{isPassword:!0,placeholder:"Password",changeHandler:function(e){e.persist(),k(Object(d.a)(Object(d.a)({},b),{},{password:e.target.value}))},value:w})),"create"===h&&n.a.createElement("div",{className:T()("form","form__password")},n.a.createElement(R,{isPassword:!0,placeholder:"Password confirm",changeHandler:function(e){e.persist(),k(Object(d.a)(Object(d.a)({},b),{},{secondPassword:e.target.value}))},value:j})),n.a.createElement("div",{className:"login__main_submit"},n.a.createElement(q,{clickHandler:P,htmlType:"submit"},"SEND DATA")))))}))),Je=(r(341),Object(s.b)((function(e){var a=e.main,r=a.workPCD;return{workPCD:r,projects:a.projects,mapStore:a.mapStore,mapGrid:a.mapGrid,mapCurrent:a.mapCurrent,workPos:r[r.workVersion].path}}),{setMapData:function(e){return{type:"SET_MAP_DATA",payload:e}},changeBranch:he})((function(e){var a=e.workPCD,r=e.projects,o=e.mapStore,c=e.mapGrid,s=e.mapCurrent,i=e.setMapData,l=e.workPos,u=e.changeBranch,d=Object(t.useState)([]),p=Object(S.a)(d,2),m=p[0],h=p[1];return Object(t.useEffect)((function(){if(0==o){var e=[];k(r,a.projectId,"superId",e);var d=[];k(r[e[0]].versions,a.workVersion,"superId",d),function(e){var a=e,r=0,t="",n=[];function o(e){for(var a=0;a<e.length;)e[a](),a++}function c(e,a){return s.apply(this,arguments)}function s(){return(s=Object(j.a)(w.a.mark((function e(n,s){var l,u,d,p,m,h=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=h.length>2&&void 0!==h[2]?h[2]:a,u=l.branch,d=u.choseCount,p=[],m=0,n&&i({path:l.pos,height:u.boost,data:l}),0!==d){for(;m<d;)p.push(u["q"+m]),m++;o(p.map((function(e,a){return function(){c(n,s,e)}}))),s&&(l.pos.split("").every((function(e){return"0"===e}))?u.boost=0:u.boost=u["q"+~~((d%2===0?d-1:d)/2)].branch.boost)}else s&&(u.boost=r,r++,t.length<l.pos.length&&(t=l.pos));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return new Promise((function(e,a){c(!1,!0).then((function(){n=Array(r).fill("").map((function(){return[]})).map((function(){return Array(t.length).fill("").map((function(){return{data:null}}))})),c(!0,!1).then((function(){n=n.reverse(),e({data:{grid:n}})}))}))}));function i(e){var a=e.path,r=e.height,t=e.data;n[+r][a.length-1].data=t}}(r[e[0]].versions[d[0]].data).then((function(e){var a=l,r=e.data.grid.slice(),t=e.data.grid.map((function(e,r){return e.map((function(e){var r,t=e.data;return n.a.createElement(ce,{clickHandler:function(){return u(t.pos)},data:t,current:(null!==(r=null===t||void 0===t?void 0:t.pos)&&void 0!==r?r:null)===a})}))}));console.timeEnd(),i({mapGrid:r,mapStore:t,mapCurrent:a}),h(t.map((function(e){return n.a.createElement("div",{className:"map__line"},e)})))})),console.time()}else if(s!==l){var p={},m={};c.forEach((function(e,a){e.forEach((function(e,r){var t=e.data;(null===t||void 0===t?void 0:t.pos)===l&&(m={h:a,l:r}),(null===t||void 0===t?void 0:t.pos)===s&&(p={h:a,l:r})}))}));var v=p,f=v.h,E=v.l,b=m,_=b.h,g=b.l;o[f][E]=Object(t.cloneElement)(o[f][E],{current:!1}),o[_][g]=Object(t.cloneElement)(o[_][g],{current:!0}),i({mapGrid:c,mapStore:o,mapCurrent:l}),h(o.map((function(e){return n.a.createElement("div",{className:"map__line"},e)})))}})),n.a.createElement("div",{className:"map"},n.a.createElement("div",{className:"map__top"},n.a.createElement("div",{className:"map__top_space"}),n.a.createElement("div",{className:"map__top_mainPart"},n.a.createElement("div",{className:"map__top_mainPart_wrapper"},n.a.createElement("div",{className:"map__top_mainPart_space"}),n.a.createElement("div",{className:"map__top_mainPart_wrapper_row"},n.a.createElement("div",null," ",m),n.a.createElement("div",{className:"map__top_mainPart_space_row"})))),n.a.createElement("div",{className:"map__top_space"})),n.a.createElement("div",{className:"map__bottom"},n.a.createElement("div",{className:"map__bottom_space"})))}))),ze=(r(342),Object(s.b)((function(e){var a=e.main;return{projects:a.projects,mainPlace:a.mainPlace}}),{})((function(e){var a=e.projects,r=e.mainPlace;return n.a.createElement(n.a.Fragment,null,a?n.a.createElement("section",{className:"base"},n.a.createElement(Me,null),n.a.createElement("div",{className:"base__mainPart"},n.a.createElement(Ke,null),n.a.createElement("div",{className:"base__workPlace"},"map"===r?n.a.createElement(Je,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(Ue,null),n.a.createElement(y,null))))):n.a.createElement("section",{className:"auth"},n.a.createElement(xe,null)))})));r(343);c.a.render(n.a.createElement(s.a,{store:I},n.a.createElement(ze,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[185,1,2]]]);
//# sourceMappingURL=main.582ccd28.chunk.js.map